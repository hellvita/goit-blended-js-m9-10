{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/local-storage-api.js","../src/js/utils.js","../src/js/tasks.js","../src/js/markup-tasks.js","../src/js/render-tasks.js","../src/js/theme-switcher.js","../src/main.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('#task-form'),\n  inputName: document.querySelector('[name=\"taskName\"]'),\n  inputDescription: document.querySelector('[name=\"taskDescription\"]'),\n  taskList: document.querySelector('#task-list'),\n  themeToggle: document.querySelector('#themeToggle'),\n  body: document.body,\n};\n","const TASKS_KEY = 'tasks';\nconst THEME_KEY = 'theme';\n\nexport function saveTasks(tasks) {\n  try {\n    localStorage.setItem(TASKS_KEY, JSON.stringify(tasks));\n  } catch (e) {\n    console.log('Failed to save tasks:', e);\n  }\n}\n\nexport function loadTasks() {\n  try {\n    const storageTasks = localStorage.getItem(TASKS_KEY);\n    if (!saveTasks) return [];\n    const parsed = JSON.parse(storageTasks);\n    return Array.isArray(parsed) ? parsed : [];\n  } catch (e) {\n    console.log('Failed to parse tasks from localStorage, resetting:', e);\n    return [];\n  }\n}\n\nexport function saveTheme(theme) {\n  localStorage.setItem(THEME_KEY, theme);\n}\n\nexport function loadTheme() {\n  return localStorage.getItem(THEME_KEY) || null;\n}\n","export function genID() {\n  return `${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 9)}`;\n}\n","import { genID } from './utils';\n\nlet taskList = [];\n\nexport function initTasks(initial = []) {\n  taskList = Array.isArray(initial) ? initial : [];\n}\n\nexport function addTask({ title, description }) {\n  const trimmed = (title || '').trim();\n  if (!trimmed) return alert('Title is required!');\n  const task = {\n    id: genID(),\n    title: trimmed,\n    description: (description || '').trim(),\n    createdAt: Date.now(),\n  };\n  taskList.unshift(task);\n  return task;\n}\n\nexport function deleteTask(id) {\n  const index = taskList.findIndex(task => task.id === id);\n  if (index === -1) return false;\n  taskList.splice(index, 1);\n  return true;\n}\n\nexport function setTasks(newTaskList) {\n  taskList = Array.isArray(newTaskList) ? newTaskList : [];\n}\n\nexport function getTasks() {\n  return taskList.slice();\n}\n","export function createTaskElement(task) {\n  return `\n      <li class=\"task-list-item\" data-id=\"${task.id}\">\n        <button class=\"task-list-item-btn\">Delete</button>\n        <h3>${task.title}</h3>\n        <p>${task.description}</p>\n      </li>\n  `;\n}\n","import { createTaskElement } from './markup-tasks';\nimport { refs } from './refs';\n\nexport function removeByID(id) {\n  const el = refs.taskList.querySelector(`[data-id=\"${id}\"]`);\n  if (el) el.remove();\n}\n\nexport function appendTask(task) {\n  const taskStr = createTaskElement(task);\n  refs.taskList.insertAdjacentHTML('afterbegin', taskStr);\n}\n\nexport function renderAll(taskList) {\n  refs.taskList.innerHTML = '';\n  const taskListStr = taskList.map(task => createTaskElement(task)).join('');\n  refs.taskList.insertAdjacentHTML('afterbegin', taskListStr);\n}\n","import { refs } from './refs';\nimport { saveTheme, loadTheme } from './local-storage-api';\n\nconst THEME_DARK = 'theme-dark';\nconst THEME_LIGHT = 'theme-light';\n\nexport function applyTheme(theme) {\n  refs.body.classList.remove(THEME_LIGHT, THEME_DARK);\n  refs.body.classList.add(theme);\n  saveTheme(theme);\n}\n\nexport function initTheme() {\n  const stored = loadTheme();\n  applyTheme(stored ? stored : THEME_DARK);\n}\n\nexport function toggleTheme() {\n  const current = refs.body.classList.contains(THEME_DARK)\n    ? THEME_DARK\n    : THEME_LIGHT;\n  const next = current === THEME_DARK ? THEME_LIGHT : THEME_DARK;\n  applyTheme(next);\n}\n","import { refs } from './js/refs';\nimport * as storage from './js/local-storage-api';\nimport * as taskList from './js/tasks';\nimport * as render from './js/render-tasks';\nimport { initTheme, toggleTheme } from './js/theme-switcher';\n\ninitTheme();\n\nconst stored = storage.loadTasks();\ntaskList.setTasks(stored);\nrender.renderAll(taskList.getTasks());\n\nrefs.form.addEventListener('submit', onAdd);\n\nrefs.taskList.addEventListener('click', onDelete);\n\nrefs.themeToggle.addEventListener('click', () => toggleTheme());\n\nfunction onAdd(e) {\n  e.preventDefault();\n  try {\n    const title = refs.inputName.value;\n    const description = refs.inputDescription.value;\n    const task = taskList.addTask({ title, description });\n    storage.saveTasks(taskList.getTasks());\n    render.appendTask(task);\n    refs.form.reset();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction onDelete(e) {\n  if (e.target.nodeName === 'BUTTON') {\n    const button = e.target;\n    const li = button.closest('.task-list-item');\n    const id = li.dataset.id;\n    if (!id) return;\n    const removed = taskList.deleteTask(id);\n    if (removed) {\n      storage.saveTasks(taskList.getTasks());\n      render.removeByID(id);\n    }\n  }\n}\n"],"names":["refs","TASKS_KEY","THEME_KEY","saveTasks","tasks","loadTasks","storageTasks","parsed","e","saveTheme","theme","loadTheme","genID","taskList","addTask","title","description","trimmed","task","deleteTask","id","index","setTasks","newTaskList","getTasks","createTaskElement","removeByID","el","appendTask","taskStr","renderAll","taskListStr","THEME_DARK","THEME_LIGHT","applyTheme","initTheme","stored","toggleTheme","next","storage.loadTasks","taskList.setTasks","render.renderAll","taskList.getTasks","onAdd","onDelete","taskList.addTask","storage.saveTasks","render.appendTask","err","taskList.deleteTask","render.removeByID"],"mappings":"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"}