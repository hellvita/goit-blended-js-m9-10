{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/constant.js","../src/js/utils.js","../src/js/tasks.js","../src/js/markup-tasks.js","../src/js/render-tasks.js","../src/js/local-storage-api.js","../src/js/theme-switcher.js","../src/main.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('#task-form'),\n  inputName: document.querySelector('[name=\"taskName\"]'),\n  inputDescription: document.querySelector('[name=\"taskDescription\"]'),\n  taskList: document.querySelector('#task-list'),\n  themeToggle: document.querySelector('#themeToggle'),\n  body: document.body,\n};\n","export const TASKS_KEY = 'tasks';\nexport const THEME_KEY = 'theme';\n\nexport const TASK_EXAMPLE = [\n  {\n    title: 'meeting at 4:00 PM',\n    description:\n      'Kyiv Planetarium, main entrance (house-metro: 15 min, metro: 25 min, total: 40 min)',\n  },\n  { title: 'call mom' },\n];\n","export function genID() {\n  return `${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 9)}`;\n}\n","import { genID } from './utils';\n\nlet taskList = [];\n\nexport function initTasks(initial = []) {\n  taskList = Array.isArray(initial) ? initial : [];\n}\n\nexport function addTask({ title, description }) {\n  const trimmed = (title || '').trim();\n  if (!trimmed) return alert('Title is required!');\n  const task = {\n    id: genID(),\n    title: trimmed,\n    description: (description || '').trim(),\n    createdAt: Date.now(),\n  };\n  taskList.unshift(task);\n  return task;\n}\n\nexport function deleteTask(id) {\n  const index = taskList.findIndex(task => task.id === id);\n  if (index === -1) return false;\n  taskList.splice(index, 1);\n  return true;\n}\n\nexport function setTasks(newTaskList) {\n  taskList = Array.isArray(newTaskList) ? newTaskList : [];\n}\n\nexport function getTasks() {\n  return taskList.slice();\n}\n","export function createTaskElement(task) {\n  return `\n      <li class=\"task-list-item\" data-id=\"${task.id}\">\n        <button class=\"task-list-item-btn\">Delete</button>\n        <h3>${task.title}</h3>\n        <p>${task.description}</p>\n      </li>\n  `;\n}\n","import { createTaskElement } from './markup-tasks';\nimport { refs } from './refs';\n\nexport function removeByID(id) {\n  const el = refs.taskList.querySelector(`[data-id=\"${id}\"]`);\n  if (el) el.remove();\n}\n\nexport function appendTask(task) {\n  const taskStr = createTaskElement(task);\n  refs.taskList.insertAdjacentHTML('afterbegin', taskStr);\n}\n\nexport function renderAll(taskList) {\n  refs.taskList.innerHTML = '';\n  const taskListStr = taskList.map(task => createTaskElement(task)).join('');\n  refs.taskList.insertAdjacentHTML('afterbegin', taskListStr);\n}\n","import { TASKS_KEY, THEME_KEY, TASK_EXAMPLE } from './constant';\nimport * as storage from './local-storage-api';\nimport * as taskList from './tasks';\nimport * as render from './render-tasks';\n\nexport function saveTasks(tasks) {\n  try {\n    localStorage.setItem(TASKS_KEY, JSON.stringify(tasks));\n  } catch (e) {\n    console.log('Failed to save tasks:', e);\n  }\n}\n\nexport function loadTasks() {\n  try {\n    const storageTasks = localStorage.getItem(TASKS_KEY);\n    if (!saveTasks) return [];\n    const parsed = JSON.parse(storageTasks);\n    return Array.isArray(parsed) ? parsed : [];\n  } catch (e) {\n    console.log('Failed to parse tasks from localStorage, resetting:', e);\n    return [];\n  }\n}\n\nexport function saveTheme(theme) {\n  localStorage.setItem(THEME_KEY, theme);\n}\n\nexport function loadTheme() {\n  return localStorage.getItem(THEME_KEY) || null;\n}\n\nexport function setDefaultTasks() {\n  let tempTasks = JSON.parse(localStorage.getItem(TASKS_KEY)) || [];\n\n  if (tempTasks.length === 0) {\n    tempTasks = TASK_EXAMPLE;\n    tempTasks.forEach(temp_task => {\n      const title = temp_task.title;\n      const description = temp_task.description;\n      const task = taskList.addTask({ title, description });\n      storage.saveTasks(taskList.getTasks());\n      render.appendTask(task);\n    });\n  }\n}\n","import { refs } from './refs';\nimport { saveTheme, loadTheme } from './local-storage-api';\n\nconst THEME_DARK = 'theme-dark';\nconst THEME_LIGHT = 'theme-light';\n\nexport function applyTheme(theme) {\n  refs.body.classList.remove(THEME_LIGHT, THEME_DARK);\n  refs.body.classList.add(theme);\n  saveTheme(theme);\n}\n\nexport function initTheme() {\n  const stored = loadTheme();\n  applyTheme(stored ? stored : THEME_DARK);\n}\n\nexport function toggleTheme() {\n  const current = refs.body.classList.contains(THEME_DARK)\n    ? THEME_DARK\n    : THEME_LIGHT;\n  const next = current === THEME_DARK ? THEME_LIGHT : THEME_DARK;\n  applyTheme(next);\n}\n","import { refs } from './js/refs';\nimport * as storage from './js/local-storage-api';\nimport * as taskList from './js/tasks';\nimport * as render from './js/render-tasks';\nimport { initTheme, toggleTheme } from './js/theme-switcher';\n\ninitTheme();\n\nstorage.setDefaultTasks();\nconst stored = storage.loadTasks();\ntaskList.setTasks(stored);\nrender.renderAll(taskList.getTasks());\n\nrefs.form.addEventListener('submit', onAdd);\n\nrefs.taskList.addEventListener('click', onDelete);\n\nrefs.themeToggle.addEventListener('click', () => toggleTheme());\n\nfunction onAdd(e) {\n  e.preventDefault();\n  try {\n    const title = refs.inputName.value;\n    const description = refs.inputDescription.value;\n    const task = taskList.addTask({ title, description });\n    storage.saveTasks(taskList.getTasks());\n    render.appendTask(task);\n    refs.form.reset();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction onDelete(e) {\n  if (e.target.nodeName === 'BUTTON') {\n    const button = e.target;\n    const li = button.closest('.task-list-item');\n    const id = li.dataset.id;\n    if (!id) return;\n    const removed = taskList.deleteTask(id);\n    if (removed) {\n      storage.saveTasks(taskList.getTasks());\n      render.removeByID(id);\n    }\n  }\n}\n"],"names":["refs","TASKS_KEY","THEME_KEY","TASK_EXAMPLE","genID","taskList","addTask","title","description","trimmed","task","deleteTask","id","index","setTasks","newTaskList","getTasks","createTaskElement","removeByID","el","appendTask","taskStr","renderAll","taskListStr","saveTasks","tasks","loadTasks","storageTasks","parsed","e","saveTheme","theme","loadTheme","setDefaultTasks","tempTasks","temp_task","taskList.addTask","storage.saveTasks","taskList.getTasks","render.appendTask","THEME_DARK","THEME_LIGHT","applyTheme","initTheme","stored","toggleTheme","next","storage.setDefaultTasks","storage.loadTasks","taskList.setTasks","render.renderAll","onAdd","onDelete","err","taskList.deleteTask","render.removeByID"],"mappings":"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"}